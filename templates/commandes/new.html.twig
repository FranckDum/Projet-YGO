{% extends 'base.html.twig' %}

{% block title %}Récapitulatif de la commande{% endblock %}
{% block h1 %}Récapitulatif de la commande{% endblock %}

{% block body %}

<main class="container mx-auto p-2">
    {{ include('commandes/_form.html.twig') }}

    <a href="{{ path('app_commandes_index') }}">Retour</a>
    {% if app.user %}
    <h2>Commande n°{{ commande.numeros }}</h2>
    <h3>Adresse de livraison :</h3>
    <p>{{ adresseLivraison.adresseLivraison }}</p>
    <h3>Adresse de facturation :</h3>
    <p>{{ adresseFacturation.adresseFacturation }}</p>

    <div class="table-responsive">
        <table class="table table-striped table-hover text-center">
            <thead class="table-dark">
                <tr>
                    <th>Image</th>
                    <th>Nom</th>
                    <th>Quantité</th>
                    <th>Prix</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                {% for produit in produits %}
                <tr id="tr{{produit.id}}">
                    <td><img class="imagePanier" src="/Images/ImgCartes/small/{{ produit.ygoId }}.jpg" alt="{{ produit.nom }}"></td>
                    <td>{{ produit.nom }}</td>
                    <td>
                        <span id="quantite{{ produit.id }}">{{ produit.quantite }}</span>
                    </td>
                    <td>{{ produit.prix }}</td>
                    <td><span id="total{{ produit.id }}">{{ produit.total|number_format(2) }}</span></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <div class="mt-3 text-center">
        <h4>Total du Panier: <span id="montantTotal">{{ totalPanier|number_format(2) }}</span> €</h4>
    </div>
    {% else %}
        <h2>Veuillez vous connecter pour accéder au récapitulatif de la commande</h2>
    {% endif %}


</main>

{% endblock %}
